<!--pages/profile/profile.wxml-->
<view class="profile-container">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <navigation-bar title="æˆ‘çš„" />

  <view class="profile-content">
    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
    <view class="user-card">
      <view class="user-info">
        <image class="avatar" src="{{userInfo.avatar || '/assets/images/avatar-placeholder.png'}}" mode="aspectFill" />
        <view class="user-details">
          <text class="nickname">{{userInfo.nickname || 'Cshineç”¨æˆ·'}}</text>
          <text class="user-id" wx:if="{{userInfo.id}}">ID: {{userInfo.id.substring(0, 8)}}...</text>
          <text class="profile-hint" wx:if="{{!userInfo.avatar}}">ç‚¹å‡»å®Œå–„å¤´åƒå’Œæ˜µç§°</text>
        </view>
        
        <!-- å¦‚æœæœ‰çœŸå®å¤´åƒï¼Œæ˜¾ç¤ºé€€å‡ºæŒ‰é’®ï¼›å¦åˆ™æ˜¾ç¤ºå®Œå–„èµ„æ–™æŒ‰é’® -->
        <view wx:if="{{userInfo.avatar && userInfo.avatar.includes('wx.qlogo')}}" class="logout-btn" bindtap="handleLogout">é€€å‡º</view>
        <view wx:else class="complete-btn" bindtap="handleLogin">å®Œå–„èµ„æ–™</view>
      </view>
    </view>

    <!-- æ•°æ®ç»Ÿè®¡ -->
    <view wx:if="{{isLogin}}" class="stats-section">
      <view class="section-title">æ•°æ®ç»Ÿè®¡</view>
      <view class="stats-grid">
        <view class="stat-item">
          <text class="stat-value">{{stats.flashCount}}</text>
          <text class="stat-label">é—ªè®°æ•°é‡</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{stats.meetingCount}}</text>
          <text class="stat-label">ä¼šè®®çºªè¦</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{stats.todayCount}}</text>
          <text class="stat-label">ä»Šæ—¥æ–°å¢</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{stats.totalDuration}}</text>
          <text class="stat-label">æ€»æ—¶é•¿(ç§’)</text>
        </view>
      </view>
    </view>

    <!-- åŠŸèƒ½åˆ—è¡¨ -->
    <view class="menu-section">
      <view class="menu-item" bindtap="goToSettings">
        <view class="menu-left">
          <text class="menu-icon">âš™ï¸</text>
          <text class="menu-label">è®¾ç½®</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>

      <view class="menu-item" bindtap="handleExport">
        <view class="menu-left">
          <text class="menu-icon">ğŸ“¤</text>
          <text class="menu-label">æ•°æ®å¯¼å‡º</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>

      <view class="menu-item" bindtap="handleClearCache">
        <view class="menu-left">
          <text class="menu-icon">ğŸ—‘ï¸</text>
          <text class="menu-label">æ¸…é™¤ç¼“å­˜</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>

      <view class="menu-item" bindtap="goToHelp">
        <view class="menu-left">
          <text class="menu-icon">â“</text>
          <text class="menu-label">å¸®åŠ©ä¸­å¿ƒ</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>

      <view class="menu-item" bindtap="goToAbout">
        <view class="menu-left">
          <text class="menu-icon">â„¹ï¸</text>
          <text class="menu-label">å…³äº Cshine</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>
    </view>

    <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
    <view class="version-info">
      <text class="version-text">Cshine v0.2.5</text>
      <text class="copyright">Â© 2025 Cosmos. All rights reserved.</text>
    </view>
  </view>
</view>

