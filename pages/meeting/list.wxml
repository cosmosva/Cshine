<!--ä¼šè®®çºªè¦åˆ—è¡¨é¡µ-->
<view class="meeting-list-page">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <navigation-bar title="ä¼šè®®çºªè¦" />

  <!-- ä¸»å†…å®¹åŒº -->
  <view class="page-content">
    <!-- é¡¶éƒ¨æ“ä½œåŒº -->
    <view class="top-section">
      <!-- ç»Ÿè®¡ä¿¡æ¯ -->
      <view class="stats-info">
        <text class="stats-number">{{total}}</text>
        <text class="stats-label">ä¸ªä¼šè®®</text>
      </view>

      <!-- ä¸Šä¼ æŒ‰é’® -->
      <view class="upload-btn" bindtap="goToUpload">
        <text class="icon">ğŸ“</text>
        <text class="label">ä¸Šä¼ ä¼šè®®</text>
      </view>
    </view>

    <!-- çŠ¶æ€ç­›é€‰å™¨ -->
    <view class="status-filter">
      <view 
        class="filter-item {{statusFilter === item.value ? 'active' : ''}}"
        wx:for="{{statusOptions}}"
        wx:key="value"
        data-status="{{item.value}}"
        bindtap="onStatusChange"
      >
        {{item.label}}
      </view>
    </view>

    <!-- ä¼šè®®åˆ—è¡¨ -->
    <scroll-view 
      class="meeting-scroll"
      scroll-y
      enhanced
      show-scrollbar="{{false}}"
      enable-back-to-top
      refresher-enabled
      refresher-triggered="{{loading}}"
      bindrefresherrefresh="onPullDownRefresh"
      bindscrolltolower="onReachBottom"
    >
      <!-- åˆ—è¡¨å†…å®¹ -->
      <view class="meeting-list">
        <view 
          class="meeting-card"
          wx:for="{{meetingList}}"
          wx:key="id"
          bindtap="viewMeeting"
          data-id="{{item.id}}"
          data-status="{{item.status}}"
        >
          <!-- çŠ¶æ€æ ‡ç­¾ -->
          <view class="status-tag" style="background-color: {{statusColorMap[item.status]}};">
            {{statusTextMap[item.status]}}
          </view>

          <!-- ä¼šè®®ä¿¡æ¯ -->
          <view class="meeting-info">
            <view class="meeting-title">{{item.title}}</view>
            
            <view class="meeting-meta">
              <text class="meta-item" wx:if="{{item.meeting_date}}">
                ğŸ“… {{formatTime(item.meeting_date)}}
              </text>
              <text class="meta-item" wx:if="{{item.audio_duration}}">
                â±ï¸ {{formatDuration(item.audio_duration)}}
              </text>
              <text class="meta-item" wx:if="{{item.participants && item.participants.length > 0}}">
                ğŸ‘¥ {{item.participants.length}}äºº
              </text>
            </view>

            <!-- æ‘˜è¦é¢„è§ˆ -->
            <view class="meeting-summary" wx:if="{{item.summary && item.status === 'completed'}}">
              {{item.summary}}
            </view>

            <!-- å¤„ç†ä¸­æç¤º -->
            <view class="processing-tip" wx:if="{{item.status === 'processing'}}">
              ğŸ”„ æ­£åœ¨å¤„ç†ä¸­ï¼Œé¢„è®¡éœ€è¦å‡ åˆ†é’Ÿ...
            </view>

            <!-- å¤±è´¥æç¤º -->
            <view class="error-tip" wx:if="{{item.status === 'failed'}}">
              âš ï¸ å¤„ç†å¤±è´¥ï¼Œè¯·é‡æ–°ä¸Šä¼ 
            </view>
          </view>

          <!-- æ“ä½œæŒ‰é’® -->
          <view class="meeting-actions" catchtap="stop">
            <view class="action-btn delete" bindtap="deleteMeeting" data-id="{{item.id}}">
              ğŸ—‘ï¸
            </view>
          </view>
        </view>

        <!-- ç©ºçŠ¶æ€ -->
        <view class="empty-state" wx:if="{{meetingList.length === 0 && !loading}}">
          <text class="empty-icon">ğŸ“‹</text>
          <text class="empty-text">æš‚æ— ä¼šè®®çºªè¦</text>
          <text class="empty-hint">ç‚¹å‡»ä¸Šæ–¹ã€Œä¸Šä¼ ä¼šè®®ã€æŒ‰é’®å¼€å§‹</text>
        </view>

        <!-- åŠ è½½æç¤º -->
        <view class="load-more" wx:if="{{loading}}">
          <text class="loading-text">åŠ è½½ä¸­...</text>
        </view>

        <view class="load-more" wx:if="{{!loading && !hasMore && meetingList.length > 0}}">
          <text class="no-more-text">æ²¡æœ‰æ›´å¤šäº†</text>
        </view>
      </view>
    </scroll-view>
  </view>
</view>

