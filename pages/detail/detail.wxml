<!-- é—ªè®°è¯¦æƒ…é¡µ -->
<view class="detail-page">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="custom-navbar">
    <view class="navbar-back" catchtap="onBack">
      <text class="back-icon">â†</text>
    </view>
    <view class="navbar-title">
      <text>é—ªè®°è¯¦æƒ…</text>
    </view>
    <view class="navbar-placeholder"></view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{isLoading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- è¯¦æƒ…å†…å®¹ - å¯æ»šåŠ¨ -->
  <scroll-view class="detail-scroll" scroll-y="{{true}}" wx:else>
    <view class="detail-content">
      <!-- å¤´éƒ¨ä¿¡æ¯ -->
      <view class="detail-header">
        <!-- åˆ†ç±»æ ‡ç­¾ -->
        <view class="category-tag" data-category="{{flash.category}}">
          <text>{{flash.category}}</text>
        </view>

        <!-- æ—¶é—´ -->
        <view class="time-info">
          <text class="time-text">{{flash.created_at}}</text>
        </view>
      </view>

      <!-- éŸ³é¢‘æ’­æ”¾å™¨ -->
      <view class="audio-player" wx:if="{{flash.audio_url}}">
        <view class="player-control">
          <view class="play-btn" catchtap="togglePlay">
            <text class="play-icon">{{isPlaying ? 'â¸' : 'â–¶ï¸'}}</text>
          </view>
          <view class="player-info">
            <view class="progress-bar">
              <view class="progress-fill" style="width: {{playProgress}}%"></view>
            </view>
            <view class="time-display">
              <text class="current-time">{{currentTimeText}}</text>
              <text class="duration">{{durationText}}</text>
            </view>
          </view>
        </view>
      </view>

      <!-- AI å¤„ç†çŠ¶æ€ -->
      <view class="ai-status" wx:if="{{flash.ai_status === 'processing'}}">
        <text class="status-icon">ğŸ¤–</text>
        <text class="status-text">AI æ­£åœ¨å¤„ç†...</text>
      </view>

      <!-- æ ‡é¢˜ -->
      <view class="detail-title" wx:if="{{flash.title}}">
        <text>{{flash.title}}</text>
      </view>

      <!-- ä¸»è¦å†…å®¹ -->
      <view class="detail-body">
        <text class="content-text" user-select="true">{{flash.content}}</text>
      </view>

      <!-- æ‘˜è¦ -->
      <view class="detail-summary" wx:if="{{flash.summary}}">
        <view class="section-title">
          <text>ğŸ“ æ™ºèƒ½æ‘˜è¦</text>
        </view>
        <view class="summary-content">
          <text user-select="true">{{flash.summary}}</text>
        </view>
      </view>

      <!-- å…³é”®è¯ -->
      <view class="detail-keywords" wx:if="{{flash.keywords && flash.keywords.length > 0}}">
        <view class="section-title">
          <text>ğŸ”‘ å…³é”®è¯</text>
        </view>
        <view class="keywords-list">
          <view class="keyword-item" wx:for="{{flash.keywords}}" wx:key="index">
            <text>{{item}}</text>
          </view>
        </view>
      </view>

      <!-- åº•éƒ¨æ“ä½œæ  -->
      <view class="detail-actions">
        <view class="action-btn" catchtap="onEdit">
          <text class="btn-icon">âœï¸</text>
          <text class="btn-text">ç¼–è¾‘</text>
        </view>

        <view class="action-btn" catchtap="onToggleFavorite">
          <text class="btn-icon">{{flash.is_favorite ? 'â­ï¸' : 'â˜†'}}</text>
          <text class="btn-text">{{flash.is_favorite ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
        </view>

        <view class="action-btn delete-btn" catchtap="onDelete">
          <text class="btn-icon">ğŸ—‘ï¸</text>
          <text class="btn-text">åˆ é™¤</text>
        </view>
      </view>

      <!-- å®‰å…¨åŒºåŸŸåº•éƒ¨å ä½ -->
      <view class="safe-area-bottom"></view>
    </view>
  </scroll-view>
</view>

